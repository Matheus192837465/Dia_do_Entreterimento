<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Impossible Quiz — Hardcore + Falsas Telas</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<style>
  :root{
    --bg:#0f1113; --panel:#151718; --accent:#00d084; --danger:#ff4d4d; --muted:#bfc6cc;
  }
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Arial;background:var(--bg);color:#fff}
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:30px}
  .panel{width:820px;background:linear-gradient(180deg,#131517 0%, #0f1113 100%);border-radius:12px;padding:28px;box-shadow:0 8px 40px rgba(0,0,0,.6);border:1px solid rgba(255,255,255,0.03)}
  h1{margin:0 0 16px;font-size:28px;text-align:center}
  #question{font-size:20px;margin-bottom:18px;text-align:center}
  #options{display:flex;flex-wrap:wrap;justify-content:center;gap:12px;min-height:120px;position:relative}
  .btn-quiz{min-width:160px;padding:10px 14px;font-size:16px;border-radius:8px;cursor:pointer;user-select:none}
  .btn-quick{transition:transform .05s linear}
  .status{height:28px;margin-top:14px;text-align:center;color:var(--muted)}
  .overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:300;backdrop-filter: blur(2px)}
  .fake-screen{width:900px;height:560px;border-radius:8px;box-shadow:0 20px 80px rgba(0,0,0,.8);overflow:hidden;border:1px solid rgba(255,255,255,0.04)}
  .shutdown{background:#000;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:monospace}
  .shutdown h2{font-size:28px;margin-bottom:18px}
  .shutdown .dots{font-size:18px;opacity:.8}
  .login{background:linear-gradient(180deg,#0b1220,#08121a);display:flex;align-items:center;justify-content:center;color:#fff}
  .login-box{background:rgba(255,255,255,0.03);padding:26px;border-radius:10px;width:420px;text-align:center}
  .login-input{width:100%;padding:10px;margin:10px 0;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff}
  .terminal{background:#01060a;color:#7afca6;padding:18px;font-family:monospace;line-height:1.4;overflow:auto}
  .terminal .line{white-space:pre-wrap}
  .muted{color:var(--muted);font-size:13px}
  .center{display:flex;align-items:center;justify-content:center}
</style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <h1 id="title">Impossible Quiz — Hardcore</h1>
      <div id="question">Carregando...</div>
      <div id="options"></div>
      <div class="status" id="status">Nível: <span id="level">1</span> — Pegadinhas ativas</div>
    </div>
  </div>

  <div id="overlayContainer" style="display:none;z-index:400"></div>

<script>
const quiz = [
  { q:"Qual número é maior?", opts:[
      {t:"1", correct:true, fontStyle:"font-size:64px;"},
      {t:"999", correct:false, fontStyle:"font-size:18px;"},
      {t:"100", correct:false, fontStyle:"font-size:28px;"}
    ], },

  { q:"Clique no botão que se mexe (boa sorte)", opts:[
      {t:"Parado", correct:false},
      {t:"Móvel", correct:true, moving:true},
      {t:"Falso", correct:false}
    ], },

  { q:"Clique no botão antes que ele suma", opts:[
      {t:"Errado", correct:false},
      {t:"Certo", correct:true, vanishAfter:900},
      {t:"Errado", correct:false}
    ], },

  { q:"Digite a cor do céu em um dia claro", opts:[ {t:"", correct:"azul", input:true} ], },

  { q:"Qual é o maior?", opts:[
      {t:"Formiga", correct:false, fontStyle:"font-size:48px;"},
      {t:"Elefante", correct:true, fontStyle:"font-size:18px;"},
      {t:"Gato", correct:false, fontStyle:"font-size:26px;"}
    ], },



  { q:"Espera 2s sobre o botão e ele aparece (passe o mouse aqui)", opts:[
      {t:"Nada", correct:false},
      {t:"Revela", correct:true, appearOnHover:true},
      {t:"Falso", correct:false}
    ], },

  { q:"Digite sem Caps Lock: banana", opts:[ {t:"", correct:"banana", input:true} ], },

  { q:"Digite a cor do sol", opts:[
      {t:"", correct:"branco", input:true}
    ], },

  { q:"Qual desses é um número primo?", opts:[
      {t:"77", correct:false},
      {t:"17", correct:true, moving:true},
      {t:"9", correct:false}
    ], },

  { q:"Digite sem Caps Lock: gato", opts:[
      {t:"", correct:"gato", input:true}
    ], },

  { q:"Selecione o correto", opts:[
    {t:"Errado", correct:false},
    {t:"Certo", correct:true, fontStyle:"color:transparent;", appearOnHover:true, hiddenPosition:{top:'0px', left:'0px'}},
    {t:"Errado", correct:false}
  ], }

];

let idx = 0;
let overlayContainer = document.getElementById('overlayContainer');
let movingIntervals = [];
let gameSpeedMultiplier = 1; // aumenta com dificuldade

function $(id){return document.getElementById(id)}
function randInt(max){return Math.floor(Math.random()*max)}

function animateTitle(type='bounce'){
  if(type==='bounce'){
    anime({targets:'#title',translateY:[0,-8,0],scale:[1,1.05,1],duration:600,easing:'easeInOutSine'});
  } else if(type==='shake'){
    anime({targets:'#title',translateX:[-8,8,-6,6,0],duration:400,easing:'easeInOutSine'});
  }
}

function renderQuestion(){
  clearMoving(); // limpar intervals anteriores
  const q = quiz[idx];
  $('question').innerText = q.q;
  $('level').innerText = (idx+1);
  animateTitle('bounce');

  const options = $('options');
  options.innerHTML = '';

  q.opts.forEach((opt, i) => {
    if(opt.input){
      const inp = document.createElement('input');
      inp.className = 'form-control';
      inp.placeholder = 'Digite e pressione Enter';
      inp.style.maxWidth = '360px';
      inp.onkeydown = (e) => {
        if(e.key === 'Enter'){
          if((opt.correct).toString().toLowerCase() === inp.value.trim().toLowerCase()){
            onCorrect();
          } else {
            onWrong();
          }
        }
      }
      options.appendChild(inp);
      return;
    }

    const btn = document.createElement('button');
    btn.className = 'btn btn-quiz btn-primary btn-quick';
    btn.style.minWidth = '160px';
    btn.style.padding = '10px 14px';
    btn.style.borderRadius = '8px';
    btn.innerText = opt.t;
    // estilo de fonte (pegadinha visual)
    if(opt.fontStyle) btn.style.cssText += opt.fontStyle;

    if(opt.appearOnHover){
  btn.style.visibility='hidden';
  if(opt.hiddenPosition){
    btn.style.position='absolute';
    btn.style.top = opt.hiddenPosition.top;
    btn.style.left = opt.hiddenPosition.left;
  }
  const parent = options;
  parent.addEventListener('mouseenter', function revealOnce(){
    btn.style.visibility='visible';
    parent.removeEventListener('mouseenter', revealOnce);
  });
}

    if(opt.vanishAfter){
      setTimeout(()=>{ btn.style.visibility='hidden'; }, opt.vanishAfter);
    }

    if(opt.appearOnHover){
      btn.style.visibility='hidden';
      const parent = options;
      parent.addEventListener('mouseenter', function revealOnce(){
        btn.style.visibility='visible';
        parent.removeEventListener('mouseenter', revealOnce);
      });
    }
    if(opt.appearOnHover){
  if(opt.hiddenPosition){ 
    btn.style.position = 'absolute';
    btn.style.top = opt.hiddenPosition.top;
    btn.style.left = opt.hiddenPosition.left;
    btn.style.background = 'var(--bg)';
    btn.style.color = 'var(--bg)';
    btn.style.border = 'none';
    btn.style.visibility = 'hidden';

    btn.addEventListener('mouseenter', () => {
      btn.style.visibility = 'visible';
      btn.style.background = '';
      btn.style.color = '';
      btn.style.border = '';
    });
  } else {
    btn.style.visibility = 'hidden';
    const parent = options;
    const revealFn = function revealOnce(){
      btn.style.visibility = 'visible';
      parent.removeEventListener('mouseenter', revealFn);
    }
    parent.addEventListener('mouseenter', revealFn);
  }
}


    if(opt.moving){
      const baseMs = Math.max(120, 600 - quiz[idx].difficulty*100); // reduce with difficulty
      const ms = Math.floor(baseMs / gameSpeedMultiplier);
      const interval = setInterval(()=>{
        const rect = options.getBoundingClientRect();
        const w = rect.width - 180; // leave space
        const h = rect.height - 60;
        const left = Math.max(0, Math.floor(Math.random()*Math.max(1,w)));
        const top = Math.max(0, Math.floor(Math.random()*Math.max(1,h)));
        btn.style.position = 'absolute';
        btn.style.left = left+'px';
        btn.style.top = top+'px';
      }, ms);
      movingIntervals.push(interval);
      btn.onmouseenter = () => {
        btn.style.transform = `translate(${(Math.random()*240-120).toFixed(0)}px,${(Math.random()*120-60).toFixed(0)}px)`;
        setTimeout(()=>btn.style.transform='translate(0,0)', 260);
      };
    }

    btn.onclick = () => {
      if(opt.correct === true){
        onCorrect();
      } else {
        onWrong();
      }
    };

    options.appendChild(btn);
  });

  gameSpeedMultiplier = 1 + (quiz[idx].difficulty - 1) * 0.4;
}

function clearMoving(){
  movingIntervals.forEach(i => clearInterval(i));
  movingIntervals = [];
}

function onCorrect(){
  animateTitle('bounce');
  idx++;
  if(idx >= quiz.length){
    showFinalRandom();
  } else {
    setTimeout(renderQuestion, 350);
  }
}

function onWrong(){
  animateTitle('shake');
  showFakeSequence();
}

/* Reinicia jogo */
function restartGame(){
  idx = 0;
  clearMoving();
  renderQuestion();
}

function showFinalRandom(){
  const overlay = document.createElement('div'); 
  overlay.className = 'overlay'; 
  overlay.style.zIndex = 400;

  const screen = document.createElement('div'); 
  screen.className = 'fake-screen login center';
  screen.style.display = 'flex';
  screen.style.flexDirection = 'column';
  screen.style.justifyContent = 'center';
  screen.style.alignItems = 'center';

  const box = document.createElement('div'); 
  box.className = 'login-box';
  box.innerHTML = `
    <h2>Final — escolha com cuidado</h2>
    <div class="muted">Qual botão fecha o jogo?</div>
    <div style="margin-top:18px" id="final-buttons"></div>
  `;
  screen.appendChild(box); 
  overlay.appendChild(screen); 
  overlayContainer.appendChild(overlay); 
  overlayContainer.style.display = 'block';

  const btnWrap = box.querySelector('#final-buttons');

  const opts = [
    {t:'Finalizar'},
    {t:'Sair'}
  ];

  const correctIdx = Math.floor(Math.random() * opts.length);

  opts.forEach((o, i) => {
    const b = document.createElement('button');
    b.className = 'btn btn-quiz btn-primary';
    b.style.margin = '6px';
    b.innerText = o.t;

    b.onclick = () => {
      overlay.remove();
      overlayContainer.style.display = 'none';
      if (i === correctIdx) {
        alert('✅ Você escolheu o botão certo! Fim do quiz.');
        restartGame();
      } else {
        showFakeSequence(); // mostra a sequência de “erro” (shutdown, login, hacker)
      }
    };

    btnWrap.appendChild(b);
  });
}

function showFakeSequence(){
  clearMoving();
  overlayContainer.innerHTML = '';
  overlayContainer.style.display = 'block';

  const ov1 = document.createElement('div'); ov1.className='overlay';
  const s1 = document.createElement('div'); s1.className='fake-screen shutdown center';
  s1.innerHTML = `<div style="text-align:center;padding:40px"><h2>GAME OVER</h2><div class="muted">Parece que você perdeu...</div><div style="height:18px"></div><div class="muted dots">Desligando . . .</div></div>`;
  ov1.appendChild(s1); overlayContainer.appendChild(ov1);

  let dotEl = s1.querySelector('.dots');
  let dotStage = 0;
  const dotTimer = setInterval(()=>{ dotStage = (dotStage+1)%4; dotEl.innerText = 'Desligando ' + '.'.repeat(dotStage); }, 500);

  setTimeout(()=>{
    clearInterval(dotTimer); ov1.remove();

    const ov2 = document.createElement('div'); ov2.className='overlay';
    const s2 = document.createElement('div'); s2.className='fake-screen login center';
    s2.innerHTML = `<div style="display:flex;align-items:center;justify-content:center;height:100%"><div class="login-box">
      <h3>Entrar</h3>
      <input class="login-input" placeholder="Usuário" id="fake-user">
      <input class="login-input" placeholder="Senha" id="fake-pass" type="password">
      <div class="muted">Aguardando credenciais...</div>
      <div style="margin-top:12px"><button class="btn btn-primary" id="fake-login-btn">Entrar</button></div>
    </div></div>`;
    ov2.appendChild(s2); overlayContainer.appendChild(ov2);

    const loginBtn = s2.querySelector('#fake-login-btn');
    loginBtn.onclick = () => {
      loginBtn.innerText = 'Verificando...';
      setTimeout(()=> {
        overlayContainer.removeChild(ov2);
        showFakeTerminal();
      }, 900);
    };

  }, 1800);
}

function showFakeTerminal(){
  const ov = document.createElement('div'); ov.className='overlay';
  const s = document.createElement('div'); s.className='fake-screen terminal';
  s.style.padding='18px';
  overlayContainer.appendChild(ov); ov.appendChild(s);

  const lines = [
    "Iniciando processo de verificação...",
    "Conectando a rede... OK",
    "Acessando disco... OK",
    "Executando varredura... 0%... 32%... 78%... ",
    "ALERTA: Permissão insuficiente. Tentando escalonamento...",
    "Tentativa de engenharia social: sucesso",
    "PROCESSO: INJETANDO ARTEFATO... OK",
    ">>> root@host:~$ sudo rm -rf /not/a/real/path",
    ">>> root@host:~$ echo 'só uma simulação ;-)'",
    "Ação finalizada. Reiniciando ambiente do quiz..."
  ];

  let i=0;
  function typeLine(){
    if(i>=lines.length){
      // after finish, dismiss and restart
      setTimeout(()=>{ overlayContainer.innerHTML=''; overlayContainer.style.display='none'; restartGame(); }, 1100);
      return;
    }
    const p = document.createElement('div'); p.className='line';
    s.appendChild(p);
    let txt = lines[i];
    let k=0;
    const typer = setInterval(()=>{
      p.textContent += txt[k++] || '';
      p.scrollIntoView({behavior:'smooth', block:'end'});
      if(k > txt.length){
        clearInterval(typer);
        i++;
        setTimeout(typeLine, 350);
      }
    }, 18 + Math.random()*30);
  }
  typeLine();
}

renderQuestion();

window.addEventListener('beforeunload', ()=>{ clearMoving(); });

</script>
</body>
</html>
